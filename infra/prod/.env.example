# ─────────────────────────────────────────────────────────────────────────────
# infra/prod/.env.example
#
# Copy this file to infra/prod/.env.prod and fill in the real values.
# NEVER commit .env.prod to version control.
# ─────────────────────────────────────────────────────────────────────────────

# ── Image tag ─────────────────────────────────────────────────────────────────
# Set to a specific git SHA or semver tag for reproducible deployments.
IMAGE_TAG=latest

# ── Postgres ──────────────────────────────────────────────────────────────────
POSTGRES_USER=arc
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=arc_db

# Connection strings referenced by init_vault.sh when seeding secrets into Vault.
# Use the Postgres service name as the hostname (Docker internal DNS).
PG_URL=postgres://arc:CHANGE_ME_STRONG_PASSWORD@postgres:5432/arc_db?sslmode=disable
# Replication URL for the CDC worker (needs REPLICATION privilege)
PG_URL_CDC=postgres://arc:CHANGE_ME_STRONG_PASSWORD@postgres:5432/arc_db?replication=database&sslmode=disable
# IAM service URL (same DB, listed separately for clarity)
PG_URL_IAM=postgres://arc:CHANGE_ME_STRONG_PASSWORD@postgres:5432/arc_db?sslmode=disable

# ── NATS ─────────────────────────────────────────────────────────────────────
NATS_URL=nats://nats:4222

# ── Vault ────────────────────────────────────────────────────────────────────
# Root token is NOT set here — it is generated at init time and stored in the vault volume.
# Services connect to Vault using their VAULT_TOKEN env var which is the generated root token.
# For a more secure setup, use Vault AppRole auth instead.
VAULT_ADDR=http://vault:8200
VAULT_SECRET_PATH_PREFIX=secret/data/arc

# ── Keycloak ─────────────────────────────────────────────────────────────────
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_KEYCLOAK_PASSWORD
# PSK shared with iam-service for webhook validation
WEBHOOK_PSK=CHANGE_ME_WEBHOOK_PSK

# ── Scanner API (discovery-service) ──────────────────────────────────────────
SCANNER_BASE_URL=https://your-scanner-api.example.com
SCANNER_API_KEY=CHANGE_ME_SCANNER_KEY

# ── OTel / Jaeger ────────────────────────────────────────────────────────────
OTEL_EXPORTER_OTLP_ENDPOINT=jaeger:4317
